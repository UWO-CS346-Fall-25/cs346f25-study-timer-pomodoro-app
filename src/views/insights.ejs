<%- include('partials/head', { title }) %>
<body class="page-<%= pageId %>">
  <%- include('partials/header') %>

  <main class="container">
    <section class="page-intro">
      <h1>Progress insights</h1>
      <p>
        Pull real-time highlights from your session queue. As you log more focus blocks, these cards
        will adapt automatically so you can decide what to schedule next.
      </p>
    </section>

    <section class="insight-metrics">
      <article class="metric-card">
        <h2>Weekly streak</h2>
        <p class="metric-value"><%= insights.streakDays %> day<%= insights.streakDays === 1 ? '' : 's' %></p>
        <p class="metric-caption">Focus blocks logged in the last few days.</p>
      </article>
      <article class="metric-card">
        <h2>Total focus time</h2>
        <p class="metric-value"><%= insights.totalFocusLabel %></p>
        <p class="metric-caption">
          Across <%= summary.totalCycles %> completed intervals so far.
        </p>
      </article>
      <article class="metric-card">
        <h2>Energy check</h2>
        <p class="metric-value"><%= insights.latestMood %></p>
        <p class="metric-caption">Latest reflection pulled from your focus queue.</p>
      </article>
    </section>

    <section class="insight-grid">
      <article>
        <h2>Recent sessions</h2>
        <% if (recentSessions.length === 0) { %>
          <p class="empty-state">No sessions logged yet. Add one from the Focus page.</p>
        <% } else { %>
          <ul class="session-history" id="insightSessionList">
            <% recentSessions.forEach((session) => { %>
              <li data-session-id="<%= session.id %>">
                <h3><%= session.title %></h3>
                <p>
                  <%= session.cycles %> × <%= session.focusMinutes %> minute focus blocks
                  · <span><%= session.mood %></span>
                </p>
              </li>
            <% }); %>
          </ul>
        <% } %>
      </article>

      <article>
        <h2>Reflection prompts</h2>
        <ul class="prompt-list">
          <% reflectionPrompts.forEach((prompt) => { %>
            <li><%= prompt %></li>
          <% }); %>
        </ul>
        <p class="prompt-note">
          These prompts will eventually anchor guided journaling between sessions.
        </p>
      </article>
    </section>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
